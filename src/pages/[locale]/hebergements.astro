---
// Hébergements page - Where to stay in Annecy
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation.astro';
import { loadTranslations, t, locales } from '../../utils/i18n';
import type { Locale } from '../../types/i18n';

export async function getStaticPaths() {
  return locales.map((localeConfig) => ({
    params: { locale: localeConfig.code },
  }));
}

const { locale } = Astro.params;
const translations = await loadTranslations(locale as Locale);

// SEO data
const title = `${t(translations, 'nav.hebergements')} - Salut Annecy`;
const description = "Trouvez le logement idéal pour votre séjour à Annecy : hôtels, chambres d'hôtes, locations et campings.";

// Mock data for accommodations
const accommodations = [
  {
    id: 1,
    name: "Hôtel du Lac",
    category: "Hôtel",
    description: "Hôtel de charme face au lac d'Annecy avec vue panoramique",
    address: "5 Quai Eustache Chappuis, 74000 Annecy",
    rating: 4.6,
    price: 180,
    stars: 4,
    image: "/images/hotels/hotel-lac.jpg"
  },
  {
    id: 2,
    name: "Maison d'Hôtes Les Jardins",
    category: "Chambre d'hôtes",
    description: "Chambre d'hôtes authentique dans une maison savoyarde",
    address: "12 Rue des Jardins, 74000 Annecy",
    rating: 4.3,
    price: 95,
    stars: 3,
    image: "/images/hotels/jardins.jpg"
  },
  {
    id: 3,
    name: "Appartement Centre Historique",
    category: "Location",
    description: "Appartement cosy au cœur de la vieille ville d'Annecy",
    address: "8 Rue Filaterie, 74000 Annecy",
    rating: 4.4,
    price: 120,
    stars: 0,
    image: "/images/hotels/appartement.jpg"
  }
];

const categories = ["Tous", "Hôtels", "Chambres d'hôtes", "Locations", "Campings", "Gîtes"];
---

<Layout 
  title={title} 
  description={description} 
  locale={locale}
>
  <Navigation locale={locale} currentPath="/hebergements" />
  
  <main class="accommodations-page">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <h1 class="page-title">{t(translations, 'nav.hebergements')}</h1>
        <p class="page-description">
          Trouvez le logement idéal pour votre séjour à Annecy : hôtels, chambres d'hôtes, locations et campings.
        </p>
      </div>
    </section>

    <!-- Search and Filters -->
    <section class="search-section">
      <div class="container">
        <div class="search-form">
          <div class="search-inputs">
            <div class="input-group">
              <label for="checkin">Arrivée</label>
              <input type="date" id="checkin" name="checkin" />
            </div>
            <div class="input-group">
              <label for="checkout">Départ</label>
              <input type="date" id="checkout" name="checkout" />
            </div>
            <div class="input-group">
              <label for="guests">Voyageurs</label>
              <select id="guests" name="guests">
                <option value="1">1 personne</option>
                <option value="2">2 personnes</option>
                <option value="3">3 personnes</option>
                <option value="4">4 personnes</option>
                <option value="5+">5+ personnes</option>
              </select>
            </div>
            <button class="btn btn-primary search-btn">Rechercher</button>
          </div>
        </div>
        
        <div class="filters-bar">
          <div class="category-filters">
            <span class="filter-label">Type :</span>
            {categories.map((category) => (
              <button class={`filter-btn ${category === 'Tous' ? 'active' : ''}`}>
                {category}
              </button>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Results Section -->
    <section class="results-section">
      <div class="container">
        <div class="results-header">
          <p class="results-count">{accommodations.length} hébergements disponibles</p>
          <select class="sort-select">
            <option value="relevance">Pertinence</option>
            <option value="price-low">Prix croissant</option>
            <option value="price-high">Prix décroissant</option>
            <option value="rating">Note</option>
            <option value="distance">Distance</option>
          </select>
        </div>

        <div class="accommodations-grid">
          {accommodations.map((accommodation) => (
            <article class="accommodation-card">
              <div class="accommodation-image">
                <img src={accommodation.image} alt={accommodation.name} loading="lazy" />
                <div class="accommodation-category">{accommodation.category}</div>
                {accommodation.stars > 0 && (
                  <div class="accommodation-stars">
                    {'★'.repeat(accommodation.stars)}
                  </div>
                )}
              </div>
              <div class="accommodation-content">
                <h3 class="accommodation-name">{accommodation.name}</h3>
                <p class="accommodation-description">{accommodation.description}</p>
                <p class="accommodation-address">{accommodation.address}</p>
                <div class="accommodation-meta">
                  <div class="rating">
                    <span class="rating-stars">★★★★★</span>
                    <span class="rating-value">{accommodation.rating}</span>
                  </div>
                  <div class="price-info">
                    <span class="price">{accommodation.price}€</span>
                    <span class="price-unit">/ nuit</span>
                  </div>
                </div>
                <a href={`/${locale}/hebergements/${accommodation.id}`} class="btn btn-primary btn-block">
                  Voir les détails
                </a>
              </div>
            </article>
          ))}
        </div>

        <!-- Pagination -->
        <nav class="pagination" aria-label="Navigation des pages">
          <button class="btn btn-ghost" disabled>Précédent</button>
          <button class="btn btn-primary">1</button>
          <button class="btn btn-ghost">2</button>
          <button class="btn btn-ghost">3</button>
          <button class="btn btn-ghost">Suivant</button>
        </nav>
      </div>
    </section>
  </main>
</Layout>

<style>
  .accommodations-page {
    min-height: 100vh;
  }

  .hero-section {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    color: white;
    padding: 4rem 0 3rem;
  }

  .page-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    text-align: center;
  }

  .page-description {
    font-size: 1.25rem;
    text-align: center;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
  }

  .search-section {
    padding: 2rem 0;
    background: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .search-form {
    margin-bottom: 2rem;
  }

  .search-inputs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    align-items: end;
  }

  .input-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .input-group label {
    font-weight: 600;
    color: #374151;
    font-size: 0.875rem;
  }

  .input-group input,
  .input-group select {
    padding: 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    font-size: 1rem;
    background: white;
  }

  .search-btn {
    height: fit-content;
    padding: 0.75rem 2rem;
    white-space: nowrap;
  }

  .filters-bar {
    border-top: 1px solid #e5e7eb;
    padding-top: 2rem;
  }

  .category-filters {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .filter-label {
    font-weight: 600;
    color: #495057;
  }

  .filter-btn {
    padding: 0.5rem 1rem;
    border: 1px solid #dee2e6;
    background: white;
    border-radius: 2rem;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .filter-btn:hover,
  .filter-btn.active {
    background: #6366f1;
    color: white;
    border-color: #6366f1;
  }

  .results-section {
    padding: 2rem 0;
    background: #f9fafb;
  }

  .results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .results-count {
    font-weight: 600;
    color: #495057;
  }

  .sort-select {
    padding: 0.5rem 1rem;
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    background: white;
    font-size: 0.875rem;
  }

  .accommodations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }

  .accommodation-card {
    background: white;
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .accommodation-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1);
  }

  .accommodation-image {
    position: relative;
    height: 200px;
    background: #f8f9fa;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6c757d;
  }

  .accommodation-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .accommodation-category {
    position: absolute;
    top: 1rem;
    left: 1rem;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .accommodation-stars {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: rgba(255, 255, 255, 0.9);
    color: #fbbf24;
    padding: 0.25rem 0.5rem;
    border-radius: 1rem;
    font-size: 0.875rem;
  }

  .accommodation-content {
    padding: 1.5rem;
  }

  .accommodation-name {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: #212529;
  }

  .accommodation-description {
    color: #6c757d;
    margin-bottom: 0.75rem;
    line-height: 1.5;
  }

  .accommodation-address {
    font-size: 0.875rem;
    color: #868e96;
    margin-bottom: 1rem;
  }

  .accommodation-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .rating {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .rating-stars {
    color: #ffc107;
    font-size: 1rem;
  }

  .rating-value {
    font-weight: 600;
    color: #495057;
  }

  .price-info {
    text-align: right;
  }

  .price {
    font-size: 1.25rem;
    font-weight: 700;
    color: #6366f1;
  }

  .price-unit {
    font-size: 0.875rem;
    color: #6c757d;
  }

  .btn-block {
    width: 100%;
  }

  .pagination {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
  }

  @media (max-width: 768px) {
    .page-title {
      font-size: 2rem;
    }

    .search-inputs {
      grid-template-columns: 1fr;
    }

    .results-header {
      flex-direction: column;
      gap: 1rem;
      align-items: flex-start;
    }

    .accommodations-grid {
      grid-template-columns: 1fr;
    }

    .accommodation-meta {
      flex-direction: column;
      gap: 0.5rem;
      align-items: flex-start;
    }

    .price-info {
      text-align: left;
    }
  }
</style>